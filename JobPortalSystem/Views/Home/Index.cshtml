@model List<Job>
@{
    ViewData["Title"] = "Home Page";
}

<section class="service" id="service">
    <div class="reveal">
        <h1 class="section-header">All Jobs </h1>
        <p class="section-para fs-5">
            Explore the latest job opportunities from top employers and find the role that fits your career goals.
        </p>

        <div class="container">
            <div class="form-group mb-2">
                <label class="ps-2">Search By Name Or Location</label>
                <input type="text" id="searchBox" placeholder="Search jobs..." class="form-control mb-3" />
            </div>
        </div>

        <div class="container jobsContainer">
            <partial name="_HomeJobsPV" model="Model" />
        </div>
    </div>
</section>

<script>
    const searchBox = document.getElementById("searchBox");
    const jobsContainer = document.querySelector("div.container.jobsContainer");
    let typingTimer;
     console.log(searchBox);
    searchBox.addEventListener("input", () => {
        clearTimeout(typingTimer);
        typingTimer = setTimeout(async () => {
            const query = searchBox.value.trim(); 
            console.log(query);
            const response = await fetch(`/Home/SearchForJobAsync?searchWord=${encodeURIComponent(query)}`);
            const html = await response.text();
            jobsContainer.innerHTML = html;

          
            document.querySelectorAll('.favorite').forEach(icon => {
                icon.addEventListener('click', () => {
                    icon.classList.toggle('active');
                    icon.classList.toggle('fa-solid');
                    icon.classList.toggle('fa-regular');
                });
            });
        }, 300);
    });
</script>
